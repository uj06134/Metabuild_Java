import java.util.ArrayList;
import java.util.Scanner;

public class BookMain {
	Scanner sc = new Scanner(System.in);
	BookDao bdao = new BookDao();
	
	public BookMain() {
		init();
	}
	
	private void init() {
		while(true) {
			System.out.println("=== 메뉴 선택하기 ===");
			System.out.println("1.전체 정보 조회");
			System.out.println("2.조건 조회");
			System.out.println("3.정보 주입");
			System.out.println("4.정보 수정");
			System.out.println("5.정보 삭제");
			System.out.println("6.프로그램 종료");
			System.out.println(">>메뉴 번호 선택");
			int menu = sc.nextInt();
			switch(menu) {
				case 1:
					ArrayList<BookBean> lists = bdao.getAllBook();
					showBook(lists);
					break;
				case 2:
					getBookBySearch();
					break;
				case 3:
					insertBook();
					break;
				case 4:
					updateBook();
					break;
				case 5:
					deleteBook();
					break;
				case 6: 
					System.out.println("프로그램을 종료합니다");
					System.exit(0);
				default : System.out.println("1~6 입력 가능");
					return;
			} // switch
		} // while
	} // init

	private void deleteBook() {
		int no;
		System.out.print("삭제할 번호 입력:");
		no = sc.nextInt();
	}

	private void updateBook() {
		String title,author,publisher,pub_day;
		int price, no;
		
		System.out.print("수정할 번호 입력:");
		no = sc.nextInt();

		System.out.print("제목 입력:");
		title = sc.next();
		
		System.out.print("저자 입력:");
		author = sc.next();
		
		System.out.print("출판사 입력:");
		publisher = sc.next();
		
		System.out.print("가격 입력:");
		price = sc.nextInt();
		
		System.out.print("출판일 입력:");
		pub_day = sc.next();
		
		BookBean bb = new BookBean(no,title,author,publisher,price,pub_day);
		int cnt = bdao.updateData(bb);
		System.out.println("cnt:" + cnt);
		if(cnt>0) {
			System.out.println("수정 성공");
		}else if(cnt == 0) {
			System.out.println("조건에 맞는 레코드 없음");
		}else {
			System.out.println("수정 실패");
		}
		
		
	}

	private void getBookBySearch() {
		System.out.print("제목:1  저자:2  출판사:3  번호입력>>");
		int search_num = sc.nextInt();
		String column = null;
		switch(search_num) {
		case 1 : 
			System.out.print("조회할 제목 :");
			column="title";
			break;
		case 2 : 
			System.out.print("조회할 저자 :");
			column="author";
			break;
		case 3 : 
			System.out.print("조회할 출판사 :");
			column="publisher";
			break;
		default : break;
		}
		
		String search_word = sc.next(); // 정 출판
		ArrayList<BookBean> lists = bdao.getBookBySearch(column,search_word);// title,리  
		if(lists.size() == 0) {
			System.out.println("해당 단어는 존재하지 않음");
		}else {
			showBook(lists);
		}
		
	}//getBookBySearch
	
	public void showBook(ArrayList<BookBean> lists) {
		System.out.println("번호\t제목\t저자\t출판사\t가격\t출판일");
		for (int i=0;i<lists.size();i+=1) {
			BookBean bb = lists.get(i);
			System.out.println(bb.getNo() + "\t" + bb.getTitle() +  "\t"  +  bb.getAuthor() + "\t" + bb.getPublisher() + "\t" + bb.getPrice() + "\t" + bb.getPub_day() );
		}
	} // showBook
	
	private void insertBook() {
		String title,author,publisher,pub_day;
		int price;
		
		System.out.println("번호는 시퀀스로 자동입력");
		
		System.out.print("제목 입력:");
		title = sc.next();
		
		System.out.print("저자 입력:");
		author = sc.next();
		
		System.out.print("출판사 입력:");
		publisher = sc.next();
		
		System.out.print("가격 입력:");
		price = sc.nextInt();
		
		System.out.print("출판일 입력:");
		pub_day = sc.next();
		
		bdao.insertData(title,author,publisher,price,pub_day);
	} // insertBook
	
	public static void main(String[] args) {
		new BookMain();
	}

}
