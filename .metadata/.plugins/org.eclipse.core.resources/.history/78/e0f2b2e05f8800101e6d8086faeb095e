import java.util.ArrayList;
import java.util.Scanner;

public class CafeMain {
	Scanner sc = new Scanner(System.in);
	CafeDao cdao = new CafeDao();
	public CafeMain() {
		init();
	}

	private void init() {
		while(true){
			System.out.println("1.모든 메뉴 조회");
			System.out.println("2.검색");
			System.out.println("3.메뉴 추가");
			System.out.println("4.메뉴 수정");
			System.out.println("5.메뉴 삭제");
			System.out.println("6.지점별 메뉴 개수 조회");
			System.out.println("7.초기화");
			System.out.println("8.프로그램 종료");
			System.out.print("메뉴 선택>> ");
			int menu = sc.nextInt();
			switch(menu) {
			case 1:
				ArrayList<CafeBean> lists = cdao.getAllcafe();
				display(lists);
				break;
			case 2:
				getCafeBySearch();
				break;
			case 3:
				insertCafe();
				break;
			case 4:
				updateCafe();
				break;
			case 5:
				deleteCafe();
				break;
			case 6:
				getCountCafe();
				break;
			case 7:
				deleteAllCafe();

				break;
			case 8:
				System.out.println("프로그램을 종료합니다");
				System.exit(0);
			}
		}
	}

	private void getCountCafe() {
		
	}

	private void deleteAllCafe() {
		System.out.print("모든 데이터를 삭제하시겠습니까? (y/n): ");
	    String answer = sc.next();
	    if (answer.equals("y")) {
	        cdao.deleteAllCafe();
	        System.out.println("모든 데이터가 삭제되었습니다");
	    } 
	    else if (answer.equals("n")) {
	        System.out.println("초기화를 취소했습니다");
	    } 
	}

	private void deleteCafe() {
		int num;
		System.out.print("수정할 번호 입력:");
		num = sc.nextInt();
		cdao.deleteCafe(num);
	}

	private void updateCafe() {
		String menu, cname, open_day;
		int price, num;
		System.out.print("수정할 번호 입력:");
		num = sc.nextInt();
		System.out.print("메뉴명 입력:");
		menu = sc.next();
		System.out.print("가격 입력:");
		price = sc.nextInt();
		System.out.print("카페명 입력:");
		cname = sc.next();
		System.out.print("오픈일 입력:");
		open_day = sc.next();
		
		cdao.updateCafe(num, menu, price, cname, open_day);
	}

	private void insertCafe() {
		String menu, cname, open_day;
		int price;
		System.out.print("메뉴명 입력:");
		menu = sc.next();
		System.out.print("가격 입력:");
		price = sc.nextInt();
		System.out.print("카페명 입력:");
		cname = sc.next();
		System.out.print("오픈일 입력:");
		open_day = sc.next();
		
		cdao.insertCafe(menu, price, cname, open_day);
	}

	private void getCafeBySearch() {
		System.out.println("메뉴:1  카페명:2");
		System.out.print("검색 항목 입력:");
		int search_num = sc.nextInt();
		String column = null; 
		switch(search_num) {
		case 1:
			System.out.print("검색할 메뉴 입력:");
			column = "menu";
			break;
			
		case 2:
			System.out.print("검색할 카페명 입력:");
			column = "cname";
			break;
		
		default:
			System.out.println("1~2만 입력");
			return;
		}
		String search_word = sc.next();
		ArrayList<CafeBean> lists = cdao.getCafeBySearch(column,search_word);
		display(lists);
	}

	private void display(ArrayList<CafeBean> lists) {
		System.out.println("번호\t메뉴\t가격\t카페명\t오픈일");
		for (int i=0;i<lists.size();i+=1) {
			CafeBean cb = lists.get(i);
			System.out.println(cb.getNum()+ "\t" + cb.getMenu() + "\t" + cb.getPrice() + "\t" + cb.getCname() + "\t" + cb.getOpen_day());
		}
	}

	public static void main(String[] args) {
		new CafeMain();
	}

}